#!/usr/bin/env python3
import os
import sys
from pathlib import Path

ROOT = Path(__file__).resolve().parents[1]
venv311 = ROOT / "venv311" / "bin" / "python"
venv_python = venv311 if venv311.exists() else (ROOT / "venv" / "bin" / "python")
if venv_python.exists():
    in_venv = getattr(sys, "base_prefix", sys.prefix) != sys.prefix
    # Re-exec inside venv for consistent deps when available.
    if not in_venv:
        os.execv(str(venv_python), [str(venv_python), str(Path(__file__).resolve()), *sys.argv[1:]])

sys.path.insert(0, str(ROOT))

from core.cli import main

if __name__ == "__main__":
    main()
