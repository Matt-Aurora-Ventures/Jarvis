# Jarvis Sniper (V1) Environment Variables
#
# IMPORTANT:
# - Never commit real keys or private keys.
# - Do NOT put paid RPC provider keys in NEXT_PUBLIC_* variables.
#   Anything prefixed with NEXT_PUBLIC_ is shipped to the browser bundle.
#
# Create a local file: jarvis-sniper/.env.local (gitignored)

# ----------------------------
# Server-only (safe secrets)
# ----------------------------

# Helius Gatekeeper RPC URL (server-only).
# Production trading is fail-closed without a configured Helius endpoint.
# Example: https://beta.helius-rpc.com/?api-key=YOUR_KEY_HERE
HELIUS_GATEKEEPER_RPC_URL=

# Solana RPC used by server API routes (/api/bags/*, /api/macro, etc).
# Can include a paid provider key (Helius/QuickNode/etc).
# Legacy fallback server RPC (checked after HELIUS_GATEKEEPER_RPC_URL).
# Example: https://mainnet.helius-rpc.com/?api-key=YOUR_KEY_HERE
SOLANA_RPC_URL=

# Bags API key used by server proxy routes (/api/bags/quote + /api/bags/swap).
BAGS_API_KEY=

# Solscan Pro API key (server-only) for session-wallet on-chain position sync.
# Never expose this in NEXT_PUBLIC_* vars.
SOLSCAN_API_KEY=

# Optional: referral account (public key) to receive Bags partner fee share.
BAGS_REFERRAL_ACCOUNT=

# API key for middleware auth gate on sensitive routes (/api/bags/*, /api/jito/*, /api/session-wallet/*)
# Generate one: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# If set, clients must include "Authorization: Bearer <SNIPER_API_KEY>" header.
SNIPER_API_KEY=

# Optional: allowlist of origins for API routes (comma-separated).
# Same-origin calls work without this. Set when embedding/calling from other origins.
# Example: ALLOWED_ORIGINS=http://localhost:3001,https://sniper.example.com
ALLOWED_ORIGINS=

# ----------------------------
# xAI Autonomy (server-only)
# ----------------------------

# xAI API key (server-only). Never expose in NEXT_PUBLIC_* vars.
XAI_API_KEY=

# Base URL for xAI OpenAI-compatible API.
XAI_BASE_URL=https://api.x.ai/v1

# Batch-only mode (cost controlled).
XAI_BATCH_ENABLED=true

# Frontier model policy (strict allowlist is enforced server-side).
XAI_FRONTIER_MODEL=grok-4-1-fast-reasoning
XAI_FRONTIER_FALLBACK_MODELS=grok-4-fast-reasoning,grok-4

# Budget/limits (app-enforced).
XAI_DAILY_BUDGET_USD=10
XAI_HOURLY_MAX_INPUT_TOKENS=150000
XAI_HOURLY_MAX_OUTPUT_TOKENS=30000

# Optional: key-level rate policy (sanitized for /api/health visibility).
XAI_KEY_RATE_QPS=0.2
XAI_KEY_RATE_QPM=12
XAI_KEY_RATE_TPM=120000

# Autonomy control plane.
AUTONOMY_ENABLED=false
AUTONOMY_APPLY_OVERRIDES=false
AUTONOMY_MAX_ADJUSTMENTS_PER_CYCLE=1

# Where hourly audit artifacts are written (GCS bucket name).
AUTONOMY_AUDIT_BUCKET=

# Auth token for Cloud Scheduler -> /api/autonomy/hourly (server-only).
AUTONOMY_JOB_TOKEN=

# ----------------------------
# Investments / Perps Proxies (server-only)
# ----------------------------

# Upstream Flask perps service used by /api/perps/* proxy routes.
PERPS_SERVICE_BASE_URL=http://127.0.0.1:5001

# Upstream investments service used by /api/investments/* proxy routes.
INVESTMENTS_SERVICE_BASE_URL=http://127.0.0.1:8770

# Required for /api/investments/* write endpoints (trigger-cycle, kill-switch toggles).
# Requests must present Authorization: Bearer <INVESTMENTS_ADMIN_TOKEN>.
INVESTMENTS_ADMIN_TOKEN=

# Optional SHA label for deployed investments container image/build.
# When set alongside NEXT_PUBLIC_BUILD_SHA, UI will warn on SHA drift.
INVESTMENTS_SERVICE_BUILD_SHA=

# ----------------------------
# Client (public)
# ----------------------------

# IMPORTANT: RPC used by the browser for reads/confirmations.
# ONLY use a FREE public endpoint (e.g. https://api.mainnet-beta.solana.com).
# NEVER put paid API keys here - anything with NEXT_PUBLIC_ is bundled into client JS.
# If unset, Jarvis Sniper falls back to https://api.mainnet-beta.solana.com
NEXT_PUBLIC_SOLANA_RPC=

# Canonical public origin used for wallet deep links and share/copy links.
# Set this when you have a custom domain (recommended).
# Example: https://sniper.jarvislife.io
NEXT_PUBLIC_CANONICAL_ORIGIN=

# Internal beta feature switches for canonical /investments UI.
# Defaults: enabled for non-production, disabled for production.
NEXT_PUBLIC_ENABLE_INVESTMENTS=true
NEXT_PUBLIC_ENABLE_PERPS=true

# Optional internal-beta operator token used by the browser for investments write actions.
# Leave empty for read-only panels. If set, this value must match INVESTMENTS_ADMIN_TOKEN.
NEXT_PUBLIC_INVESTMENTS_ADMIN_TOKEN=

# ----------------------------
# Backtest Pipeline (server-only local use)
# ----------------------------

# CoinGecko Pro key used by backtest-data scripts for GeckoTerminal/CoinGecko onchain APIs.
COINGECKO_API_KEY=

# Birdeye API key used by discovery script (optional, adds extra lead source coverage).
BIRDEYE_API_KEY=

# Discovery scale controls for backtest-data/scripts/01_discover_universe.ts
GECKO_MAX_PAGES_NEW_POOLS=200
GECKO_MAX_PAGES_TOP_POOLS=200
GECKO_MAX_PAGES_MISC=10
BIRDEYE_MAX_PAGES=25
BIRDEYE_PAGE_LIMIT=50
