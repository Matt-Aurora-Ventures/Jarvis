---
phase: 02-open-claw-and-jupiter-perps-repair
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [core/open_claw/sdk.py, core/open_claw/signal_ingestion.py, core/open_claw/heuristics.py, core/open_claw/tests/test_sdk.py]
autonomous: true
requirements: [open-claw-extension]

must_haves:
  truths:
    - "Open Claw SDK can process raw market state and external signals into an actionable trade heuristic."
    - "Signals can be ingested from external systems mock structures (X/Bags.fm text or generic JSON)."
    - "Trading math logic is fully decoupled from Solana execution details."
  artifacts:
    - path: "core/open_claw/sdk.py"
      provides: "Decoupled algorithmic logic entrypoint"
      exports: ["OpenClawSDK"]
    - path: "core/open_claw/signal_ingestion.py"
      provides: "Signal normalizer"
      exports: ["SignalIngestor"]
  key_links:
    - from: "core/open_claw/sdk.py"
      to: "core/open_claw/signal_ingestion.py"
      via: "SDK uses ingestor to parse raw strings/json into standardized signal objects"
---

<objective>
Decouple the core "Open Claw" algorithmic logic and build an independent SDK for signal evaluation.

Purpose: To expose the "brains" of the trading system without tying it intimately to the Jupiter/Solana RPC dependencies. This allows tuning, testing, and eventual public access to the algorithm cleanly.
Output: The `core/open_claw` Python module containing signal ingestion from Bags.fm/X formats, processing heuristics, and the main generic SDK class.
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-open-claw-and-jupiter-perps-repair/02-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Open Claw SDK & Heuristics</name>
  <files>core/open_claw/sdk.py, core/open_claw/heuristics.py</files>
  <action>
    Create the foundational SDK class (`OpenClawSDK`). It should take generic configuration (e.g. risk_tier, tp/sl limits).
    Implement a `evaluate_market_opportunity(market_data, signals)` method that calls internal math in `heuristics.py`.
    `heuristics.py` should calculate bounded trade sizes and confidence scores based solely on the input data structures.
  </action>
  <verify>Instantiate the SDK in a Python REPL/Script and run `evaluate_market_opportunity` with dummy data without errors.</verify>
  <done>SDK returns a consistent formatted output dictionary containing `confidence`, `suggested_action` (LONG/SHORT/FLAT), and `size_modifier`.</done>
</task>

<task type="auto">
  <name>Task 2: Build External Signal Ingestion</name>
  <files>core/open_claw/signal_ingestion.py</files>
  <action>
    Create a module capable of parsing/normalizing unstructured signals (e.g. Bags.fm webhook JSON, X/Twitter text payloads).
    Implement the `SignalIngestor` class that turns these into a `StandardizedSignal` dataclass/struct for the SDK to read.
  </action>
  <verify>Provide mock JSON representing a Bags.fm signal and verify it parses accurately into `StandardizedSignal`.</verify>
  <done>Text/JSON payloads safely translate into actionable standardized states for the heuristics to ingest.</done>
</task>

<task type="auto">
  <name>Task 3: Unit Testing the Decoupled System</name>
  <files>core/open_claw/tests/test_sdk.py</files>
  <action>
    Create standard unit tests mocking the ingestion formats and asserting the SDK boundary outputs stay within the defined bounds.
  </action>
  <verify>Run `pytest core/open_claw/tests` and check that tests pass.</verify>
  <done>100% test pass rate ensuring edge cases in market mapping or signal format missing keys don't crash the logic.</done>
</task>

</tasks>

<verification>
- [ ] Pytest passes for SDK logic.
- [ ] No `solana` or execution library dependencies are imported anywhere in `core/open_claw`.
- [ ] Type hinting passes generic `mypy` checks.
</verification>

<success_criteria>
- The algorithmic logic is completely decoupled and standalone.
- The `OpenClawSDK` provides a simplified pure Python interface capable of being wrapped by a web-API later.
</success_criteria>

<output>
After completion, create `.planning/phases/02-open-claw-and-jupiter-perps-repair/02-01-SUMMARY.md`
</output>
